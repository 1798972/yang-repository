<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>查找城市id_1.0版本</title>
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js" type="application/javascript"></script>
    <script src="js/fincity.js" type="application/javascript"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
 
 <!--鼠标点击网页，聚焦到输入框-->
 <script type="text/javascript">
$(function(){
			$("body").click(function(){
 			var t =document.getElementById("cityName");
 			  t.focus();
			});
		})
</script>

<!--按回车查询,这是全局监听-->
 <script type="text/javascript">
$(document).ready(function(e) {
	$(this).keydown(function (e){
		if(e.which == "13"){
			startSelect();
	  	}
	})
});
</script>

<!--复制文本-->
 <script type="text/javascript">
function copyText(text) {
    var textarea = document.createElement("textarea");
    var currentFocus = document.activeElement;
    document.body.appendChild(textarea);
    textarea.value = text;
    textarea.focus();
    if (textarea.setSelectionRange)
        textarea.setSelectionRange(0, textarea.value.length);
    else
        textarea.select();
    try {
        var flag = document.execCommand("copy");
    } catch(eo){
        var flag = false;
    }
    document.body.removeChild(textarea);
    currentFocus.focus();
    return flag;
}
</script>

<!--按数字键完成复制操作-->
 <script type="text/javascript">
 $(document).ready(function(e) {
	$(this).keydown(function (e){
		//数字1
		if(e.which == "97" || e.which == "49"){
		//1:天元区—[4302]—株洲市-湘B
		//获取序号1的cityId
		var cityId = $("#res1").text().substr(7,4);
		//复制cityId
		copyText(cityId);
		var info = $("#res1").text().substr(2,3) + "]  的id—>"+cityId;
		$("#helpInfo").html("复制  ["+info+"成功！");
	  	}
		//数字2
		if(e.which == "98" || e.which == "50"){
		//获取序号1的cityId
		var cityId = $("#res2").text().substr(7,4);
		//复制cityId
		copyText(cityId);
		var info = $("#res2").text().substr(2,3) + "]  的id—>"+cityId;
		$("#helpInfo").html("复制  ["+info+"成功！");
	  	}
		//数字3
				if(e.which == "99" || e.which == "51"){
		//获取序号1的cityId
		var cityId = $("#res3").text().substr(7,4);
		//复制cityId
		copyText(cityId);
		var info = $("#res3").text().substr(2,3) + "]  的id—>"+cityId;
		$("#helpInfo").html("复制  ["+info+"成功！");
	  	}
		//数字4
				if(e.which == "100" || e.which == "52"){
		//获取序号1的cityId
		var cityId = $("#res4").text().substr(7,4);
		//复制cityId
		copyText(cityId);
		var info = $("#res4").text().substr(2,3) + "]  的id—>"+cityId;
		$("#helpInfo").html("复制  ["+info+"成功！");
	  	}
		//数字5
				if(e.which == "101" || e.which == "53"){
		//获取序号1的cityId
		var cityId = $("#res5").text().substr(7,4);
		//复制cityId
		copyText(cityId);
		var info = $("#res5").text().substr(2,3) + "]  的id—>"+cityId;
		$("#helpInfo").html("复制  ["+info+"成功！");
	  	}
		//数字6
				if(e.which == "102" || e.which == "54"){
		//获取序号1的cityId
		var cityId = $("#res6").text().substr(7,4);
		//复制cityId
		copyText(cityId);
		var info = $("#res6").text().substr(2,3) + "]  的id—>"+cityId;
		$("#helpInfo").html("复制  ["+info+"成功！");
	  	}
		//数字7
				if(e.which == "103" || e.which == "55"){
		//获取序号1的cityId
		var cityId = $("#res7").text().substr(7,4);
		//复制cityId
		copyText(cityId);
		var info = $("#res7").text().substr(2,3) + "]  的id—>"+cityId;
		$("#helpInfo").html("复制  ["+info+"成功！");
	  	}
		//删除键
		if(e.which == "8"){
			$("#cityName").val("");
			$("#helpInfo").html("清空了输入框的内容！");
			  var t =document.getElementById("cityName");
 			  t.focus();
	  	}
	})
});	
</script>

<!--点击按钮完成查询-->   
 <script type="text/javascript">
	function startSelect(){
		//先清空表格内容
		$("#myTable").html('');
		var resStringList = findBy2char();
		var temp = [];
		//遍历数组显示结果
		for (var i = 0; i < resStringList.length; i++) {
			/*<b id=str"+ i +">*/
			temp.push("<tr><td align=\"center\" id=\"res"+(i+1)+"\"><b>"+ resStringList[i]+"</b></td></tr>");
       }
		//append是在尾部追加!
		$("#myTable").append(temp.join(''));
		//让输入框失去焦点
		$("#cityName").blur()
        //默认复制第一个
        var cityId = $("#res1").text().substr(7,4);
        //复制cityId
        copyText(cityId);
        var info = $("#res1").text().substr(2,3) + "]  的id—>"+cityId;
        $("#helpInfo").html("复制  ["+info+"成功！");
	}
</script>
</head>
<body>
<!--1.提示部分-->
<div class="panel panel-success" style="margin:50px auto;width: 800px;">
  <div class="panel-heading" style="text-align: center;">
    <h3 class="panel-title">提示</h3>
  </div>
  <div class="panel-body">
      <p style="color: deeppink">加油小瑶瑶！</p>
    1.当结果只有一个时,已经完成复制,直接粘贴即可。<br>
    2.当结果有两个时，默认复制了第一个，按下数字键2可完成对第二个id的复制。<br>
    3.当结果有多个时，请以此类推。<br>
      快捷键:<br>
      A:按下删除键直接清除内容并聚焦输入框，可直接进行输入。<br>
      B:按下回车完成查询，默认复制第一项内容。<br>
      C:点击网页任意区域即可聚焦到输入框。<br>
  </div>
</div>

<!--2.输入框部分-->
<div class="input-group" style="margin:10px auto;width: 700px;">
  <span class="input-group-addon">查找城市编号</span>
  <input type="text" class="form-control"  style="width: 400px;" placeholder="请在此处输入地名前两字的简拼,eg:天元区——>输入ty" id="cityName">
  <button type="button" class="btn btn-default" id="selectBtn" onclick="startSelect()">查找</button>
</div>

<!--3.结果显示部分-->
<div class="panel panel-default" style="margin:10px auto;width: 700px;">
  <div class="panel-heading" style="text-align: center;
    color: red;
    -webkit-text-stroke: thin;">查询结果显示如下
  </div>
  <div>
    <!--在下面遍历显示查询结果-->
  <table class="table" id="myTable">
  	
  	<tr>
  		<td align="center" id="yyy">
  			<b>123456</b>
  		</td>
  	</tr>
  </table>
  </div>
</div>

<div class="alert alert-danger" role="alert" id="helpDiv" style="margin:10px auto;width: 700px;"><p id="helpInfo" align="center" style="color: blue;">提示</p></div>

	</body>
</html>
